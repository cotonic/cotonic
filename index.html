<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="viewport" content="target-densitydpi=device-dpi" />
        <meta name="HandheldFriendly" content="true"/>

        <title>Cotonic</title>

        <style>
body {
    font-size: 14px;
    line-height: 22px;
    background: #f4f4f4 url(docs/images/background.png);
    color: #000;
    font-family: Helvetica Neue, Helvetica, Arial;
}

section#sidebar {
    background: #fff;
    position: fixed;

    top: 0; left: 0; bottom: 0;
    width: 200px;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    padding: 15px 0 30px 30px;
    border-right: 1px solid #bbb;
    box-shadow: 0 0 20px #ccc; 
}

section#documentation {
    width: 550px;
    margin: 40px 0 50px 260px;
}

a.toc_title, a.toc_title:visited {
    display: block;
    color: #0778B0; //black;
    font-weight: bold;
    margin-top: 15px;
}

ul.toc_section {
    font-size: 11px;
    line-height: 14px;
    margin: 5px 0 0 0;
    padding-left: 0px;
    list-style-type: none;
    font-family: Lucida Grande;
}

ul.toc_section ul {
    padding-top: 0.66ex; 
    padding-left: 2em;
    list-style-type: none;
}

.toc_section li {
    cursor: pointer;
    margin: 0 0 3px 0;
}
.toc_section li a {
    text-decoration: none;
    color: black;
}
.toc_section li a:hover {
    text-decoration: underline;
}

h1, h2, h3, h4, h5, h6 {
    padding-top: 20px;
}

strong.header {
    color: #0778B0; //black;
    font-size: 16px;
    line-height: 30px;
}

code, pre, tt {
    font-family: Monaco, Consolas, "Lucida Console", monospace;
    font-size: 12px;
    line-height: 18px;
    font-style: normal;
}

code {
    margin-left: 20px;
}

pre {
    font-size: 12px;
    padding: 2px 0 2px 15px;
    border-left: 5px solid #bbb;
    margin: 0px 0 30px;
}
        </style>
    </head>
    <body>
        <section id="sidebar">
            <div>

                <a class="toc_title" href="#">
                    Cotonic <span class="version">(0.5.0)</span>
                </a>

                <ul class="toc_section">
                    <li>&raquo; <a href="https://github.com/cotonic/cotonic">Github Repository</a></li>
                    <li>&raquo; <a href="#">Introduction</a></li>
                    <li>&raquo; <a href="#workers">Implementing Workers</a></li>
                </ul>

                <a class="toc_title" href="#functions">
                    Functions
                </a>

                <ul class="toc_section">
                    <li> - <a href="#cotonic.spawn">spawn</a>
                    <li> - <a href="#cotonic.spawn_named">spawn_named</a>
                    <li> - <a href="#cotonic.send">send</a>
                    <li> - <a href="#cotonic.receive">receive</a>
                </ul>

                <!-- Broker -->
                <a href="#cotonic.broker" class="toc_title">
                    broker
                </a>

                <ul class="toc_section">
                     <li> - <a href="#cotonic.broker.find_subscriptions_below">find_subscriptions_below</a>
                     <li> - <a href="#cotonic.broker.match">match</a>
                     <li> - <a href="#cotonic.broker.publish">publish</a>
                     <li> - <a href="#cotonic.broker.subscribe">subscribe</a>
                     <li> - <a href="#cotonic.broker.unsubscribe">unsubscribe</a>
                     <li> - <a href="#cotonic.broker.call">call</a>
                </ul>

                <!-- MQTT -->
                <a href="#cotonic.mqtt" class="toc_title">
                    mqtt
                </a>
                <ul class="toc_section">
                    <li> - <a href="#cotonic.mqtt.matches">matches</a>
                    <li> - <a href="#cotonic.mqtt.extract">extract</a>
                    <li> - <a href="#cotonic.mqtt.exec">exec</a>
                    <li> - <a href="#cotonic.mqtt.fill">fill</a>
                    <li> - <a href="#cotonic.mqtt.remove_named_wildcards">remove_named_wildcards</a>
                </ul>

                <!-- UI -->
                <a href="cotonic.ui" class="toc_title">
                    ui
                </a>
                <ul class="toc_section">
                    <li> - <a href="#cotonic.ui.insert">insert</a>
                    <li> - <a href="#cotonic.ui.get">get</a>
                    <li> - <a href="#cotonic.ui.update">update</a>
                    <li> - <a href="#cotonic.ui.remove">remove</a>
                    <li> - <a href="#cotonic.ui.render">render</a>
                    <li> - <a href="#cotonic.ui.renderId">renderId</a>
                    <li> - <a href="#cotonic.ui.updateStateData">updateStateData</a>
                    <li> - <a href="#cotonic.ui.updateStateClass">updateStateClass</a>
                    <li> - <a href="#cotonic.ui.on">on</a>
                </ul>

                <a class="toc_title" href="#models">
                    Models
                </a>
                <ul class="toc_section">
                    <li> - <a href="model.document">document</a>
                    <li> - <a href="model.location">location</a>
                    <li> - <a href="model.ui">ui</a>
                    <li> - <a href="model.serviceWorker">serviceWorker</a>
                    <li> - <a href="model.sessionStorage">sessionStorage</a>
                    <li> - <a href="model.localStorage">localStorage</a>
                </ul>
            </div>

            <div>
                <a class="toc_title" href="#topics">
                    Topics
                </a>
                <ul class="toc_section">
                    <li><strong>Document</strong>
                    <li> - <a href="topic.document.get.all">model/document/get/all</a>
                    <li> - <a href="topic.document.get.intl">model/document/get/intl</a>
                    <li><strong>Location</strong>
                    <li> - <a href="topic.location.get.protocol">model/location/get/protocol</a>
                    <li> - <a href="topic.location.get.hash">model/location/get/hash</a>
                </ul>
            </div>
        </section>

        <section id="documentation">

            <p id="introduction">
            [TODO] COTONIC Logo
            </p>

            <p>
            <a href="https://github.com/cotonic/cotonic">Cotonic</a> is a Javascript
            library which makes it possible to split the javascript code of your
            page into truly isolated components. By doing this a crash in one component
            can never affect another component.
            </p>

            <p>
            Cotonic provides tools to make it possible for these components to cooperate
            by providing an MQTT publish/subscribe bus. This makes it possible for
            components to communicate via topics.
            </p>

            <h2 id="workers">Workers</h2>

            <p>
            Implementing workers
            </p>


            <h2 id="functions">Functions</h2>

            <!-- spawn -->
            <p id="cotonic.spawn">
            <strong class="header">spawn</strong> <code>cotonic.spawn(worker_src_url, [args])</code>
            </br>
            Spawn a new worker. Returns the worker-id of the process.
            </p>
            <pre>
let worker_id1 = cotonic.spawn("/js/example-worker.js");
let worker_id2 = cotonic.spawn("/js/another-worker.js", ["Arg1", 1]);</pre>

            <!-- spawn_named -->
            <p id="cotonic.spawn_named">
            <strong class="header">spawn_named</strong> <code>cotonic.spawn_named(name, worker_src_url, [base], [args])</code>
            </br>
            Spawn a new named worker. Named workers are unique. Use <code>""</code> or
            <code>undefined</code> for a nameless worker. Return the worker_id of the newly spawned
            worker. If the worker was already running, the existing worker_id is returned.
            </p>

            <pre>
cotonic.spawn_named("example", "example-worker.js");</pre>

            <!-- send -->
            <p id="cotonic.send">
            <strong class="header">send</strong> <code>cotonic.send(worker_id, message)</code>
            </br>
            Send a message to a worker.
            </p>
            <pre>
cotonic.send("example", "hello");</pre>

            <!-- receive -->
            <p id="cotonic.receive">
            <strong class="header">receive</strong> <code>cotonic.receive(handler)</code>
            </br>
            Receive messages from workers. The handler should be a function which takes 
            two parameters, the message, and the worker_id.
            </p>
            <pre>
cotonic.receive(function(message, worker_id) {
    console.log("Received", message, "from worker", worker_id);
});</pre>

            <h3 id="cotonic.broker">Broker</h3>

            <!-- find_subscriptions_below -->
            <p id="cotonic.broker.find_subscriptions_below">
            <strong class="header">find_subscriptions_below</strong> <code>cotonic.broker.find_subscriptions_below()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.find_subscriptions_below();</pre>

            <!-- match -->
            <p id="cotonic.broker.match">
            <strong class="header">match</strong> <code>cotonic.broker.match()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.match();</pre>

            <!-- publish -->
            <p id="cotonic.broker.publish">
            <strong class="header">publish</strong> <code>cotonic.broker.publish()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.publish();</pre>

            <!-- subscribe -->
            <p id="cotonic.broker.subscribe">
            <strong class="header">subscribe</strong> <code>cotonic.broker.subscribe()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.subscribe();</pre>

            <!-- unsubscribe -->
            <p id="cotonic.broker.unsubscribe">
            <strong class="header">unsubscribe</strong> <code>cotonic.broker.unsubscribe()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.unsubscribe();</pre>

            <!-- call -->
            <p id="cotonic.broker.call">
            <strong class="header">call</strong> <code>cotonic.broker.call()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.broker.call();</pre>


            <h3 id="cotonic.mqtt">MQTT</h3>

            <!-- matches -->
            <p id="cotonic.mqtt.matches">
            <strong class="header">matches</strong> <code>cotonic.mqtt.matches()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.mqtt.matches();</pre>

            <!-- extract -->
            <p id="cotonic.mqtt.extract">
            <strong class="header">extract</strong> <code>cotonic.mqtt.extract()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.mqtt.extract();</pre>

            <!-- exec -->
            <p id="cotonic.mqtt.exec">
            <strong class="header">exec</strong> <code>cotonic.mqtt.exec()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.mqtt.exec();</pre>

            <!-- fill -->
            <p id="cotonic.mqtt.fill">
            <strong class="header">fill</strong> <code>cotonic.mqtt.fill()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.mqtt.fill();</pre>

            <!-- remove_named_wildcards -->
            <p id="cotonic.mqtt.remove_named_wildcards">
            <strong class="header">fill</strong> <code>cotonic.mqtt.remove_named_wildcards()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.mqtt.remove_named_wildcards();</pre>


            <h3 id="cotonic.ui">ui</h3>

            <!-- insert -->
            <p id="cotonic.ui.insert">
            <strong class="header">insert</strong> <code>cotonic.ui.insert()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.insert();</pre>

            <!-- get -->
            <p id="cotonic.ui.get">
            <strong class="header">get</strong> <code>cotonic.ui.get()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.get();</pre>

            <!-- remove -->
            <p id="cotonic.ui.remove">
            <strong class="header">remove</strong> <code>cotonic.ui.remove()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.remove();</pre>


            <!-- update -->
            <p id="cotonic.ui.update">
            <strong class="header">update</strong> <code>cotonic.ui.update()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.update();</pre>

            <!-- render -->
            <p id="cotonic.ui.render">
            <strong class="header">render</strong> <code>cotonic.ui.render()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.render();</pre>

            <!-- renderId -->
            <p id="cotonic.ui.renderId">
            <strong class="header">renderId</strong> <code>cotonic.ui.renderId()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.renderId();</pre>

            <!-- updateStateData -->
            <p id="cotonic.ui.updateStateData">
            <strong class="header">updateStateData</strong> <code>cotonic.ui.updateStateData()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.updateStateData();</pre>

            <!-- updateStateClass -->
            <p id="cotonic.ui.updateStateClass">
            <strong class="header">updateStateClass</strong> <code>cotonic.ui.updateStateClass()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.updateStateClass();</pre>

            <!-- on -->
            <p id="cotonic.ui.on">
            <strong class="header">on</strong> <code>cotonic.ui.on()</code>
            </br>
            </p>
            <pre>
// [TODO]
cotonic.ui.on();</pre>

            <h2 id="models">Models</h2>

            <h3 id="model.document">Document</h3>

            <p>
            "model/document/get/+key" 
            </p>
            
            <h4 id="model.document.all">key = "all"</h4>

<pre>            
            screen_width
            screen_height
            inner_width
            inner_height
            is_touch
            timezone
            language
</pre>

            <h4 id="model.document.intl">key = "intl"</h4>

<pre>
            timezone
            language
</pre>

            <h3 id="model.location">Location</h3>

            <p>
            "model/location/get/+what"
            </p>

            <p>
            "model/location/event"

            ping, search (q), pathname, hash
            </p>

            <h3 id="model.ui">User Interface Composer</h3>

            <h3 id="model.serviceWorker">Service Worker</h3>
            <h3 id="model.localStorage">Local Storage</h3>
            <h3 id="model.sessionStorage">Session Storage</h3>


        </section>



    </body>
</html>
